<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 400" width="300" height="400">
  <defs>
    <style>
      .light-body { fill: #ffffff; stroke: #333; stroke-width: 2; }
      .light-on { fill: #4CAF50; filter: url(#glow); }
      .light-off { fill: #9E9E9E; }
      .light-test { fill: #FFC107; filter: url(#glow); }
      .light-fault { fill: #f44336; animation: faultBlink 0.5s infinite; }
      .battery-housing { fill: #424242; stroke: #212121; stroke-width: 2; }
      .battery-level-bg { fill: #e0e0e0; stroke: #666; stroke-width: 1; }
      .battery-level { fill: #4CAF50; transition: width 0.3s; }
      .battery-charging { fill: #2196F3; }
      .battery-low { fill: #f44336; }
      .status-indicator { stroke: #666; stroke-width: 2; }
      .status-normal { fill: #4CAF50; }
      .status-mains { fill: #2196F3; }
      .status-battery { fill: #FF9800; }
      .status-fault { fill: #f44336; animation: faultBlink 1s infinite; }
      .button { fill: #2196F3; stroke: #1976D2; stroke-width: 2; cursor: pointer; }
      .button:hover { fill: #1976D2; }
      .button-text { fill: white; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; text-anchor: middle; pointer-events: none; }
      .label-text { fill: #333; font-family: Arial, sans-serif; font-size: 13px; text-anchor: start; }
      .value-text { fill: #333; font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; text-anchor: end; }
      .title-text { fill: #333; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .small-text { fill: #666; font-family: Arial, sans-serif; font-size: 10px; text-anchor: middle; }

      @keyframes faultBlink {
        0%, 49% { opacity: 1; }
        50%, 100% { opacity: 0.2; }
      }
    </style>

    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <radialGradient id="lightGradient" cx="50%" cy="30%" r="50%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e0e0e0;stop-opacity:1" />
    </radialGradient>
  </defs>

  <!-- Title -->
  <text x="150" y="25" class="title-text">EMERGENCY LIGHT</text>

  <!-- Light Unit -->
  <g id="light-unit">
    <!-- Main housing -->
    <rect x="75" y="50" width="150" height="80" rx="5" class="light-body" fill="url(#lightGradient)"/>

    <!-- Left light head -->
    <g id="left-light">
      <rect x="85" y="80" width="40" height="30" rx="3" id="left-lamp" class="light-off"/>
      <line x1="95" y1="110" x2="95" y2="125" stroke="#333" stroke-width="2"/>
      <circle cx="95" cy="125" r="3" fill="#333"/>
      <!-- Light rays when on -->
      <g id="left-rays" opacity="0">
        <line x1="85" y1="85" x2="70" y2="70" stroke="#FFD54F" stroke-width="2" opacity="0.6"/>
        <line x1="90" y1="80" x2="80" y2="60" stroke="#FFD54F" stroke-width="2" opacity="0.6"/>
        <line x1="100" y1="80" x2="95" y2="55" stroke="#FFD54F" stroke-width="2" opacity="0.6"/>
      </g>
    </g>

    <!-- Right light head -->
    <g id="right-light">
      <rect x="175" y="80" width="40" height="30" rx="3" id="right-lamp" class="light-off"/>
      <line x1="205" y1="110" x2="205" y2="125" stroke="#333" stroke-width="2"/>
      <circle cx="205" cy="125" r="3" fill="#333"/>
      <!-- Light rays when on -->
      <g id="right-rays" opacity="0">
        <line x1="215" y1="85" x2="230" y2="70" stroke="#FFD54F" stroke-width="2" opacity="0.6"/>
        <line x1="210" y1="80" x2="220" y2="60" stroke="#FFD54F" stroke-width="2" opacity="0.6"/>
        <line x1="200" y1="80" x2="205" y2="55" stroke="#FFD54F" stroke-width="2" opacity="0.6"/>
      </g>
    </g>

    <!-- Status LED on housing -->
    <circle cx="150" cy="65" r="6" id="unit-led" class="status-indicator status-normal"/>
    <text x="150" y="48" class="small-text">STATUS</text>
  </g>

  <!-- Battery Backup Unit -->
  <g id="battery-unit">
    <rect x="50" y="160" width="200" height="100" rx="5" class="battery-housing"/>

    <!-- Battery level display -->
  <script><![CDATA[
//!export-start
let _pn_batteryLevel = 85;  // Battery level (%)
let _pn_testMode = 0;       // Test mode: 0=off, 1=on
let _pn_fault = 0;          // Fault status: 0=ok, 1=fault
let _ps_location = "Exit A"; // Location label
//!export-end

function init() { update(); }

function update() {
  const batteryText = document.getElementById('batteryText');
  const testIndicator = document.getElementById('testIndicator');
  const faultIndicator = document.getElementById('faultIndicator');
  const locationText = document.getElementById('locationText');
  if (!batteryText) return;
  batteryText.textContent = _pn_batteryLevel + '%';
  if (testIndicator) testIndicator.style.opacity = _pn_testMode ? '1' : '0.3';
  if (faultIndicator) faultIndicator.style.opacity = _pn_fault ? '1' : '0.3';
  if (locationText) locationText.textContent = _ps_location;
}

function putValue(id, value) {
  if (id === '_pn_batteryLevel') _pn_batteryLevel = Number(value) || 0;
  else if (id === '_pn_testMode') _pn_testMode = Number(value) || 0;
  else if (id === '_pn_fault') _pn_fault = Number(value) || 0;
  else if (id === '_ps_location') _ps_location = String(value);
  update();
}

init();
]]></script>
</svg>
