<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 350" width="300" height="350">
  <defs>
    <style>
      .smoke-detector-base { fill: #f0f0f0; stroke: #333; stroke-width: 2; }
      .smoke-detector-cover { fill: #ffffff; stroke: #666; stroke-width: 1.5; }
      .smoke-detector-vent { fill: #444; }
      .status-normal { fill: #4CAF50; }
      .status-smoke { fill: #f44336; }
      .status-fault { fill: #FF9800; }
      .battery-bg { fill: #e0e0e0; stroke: #666; stroke-width: 1; }
      .battery-level { fill: #4CAF50; transition: all 0.3s; }
      .battery-low { fill: #f44336; }
      .alarm-indicator { fill: #f44336; opacity: 0; }
      .alarm-active { animation: alarmPulse 0.5s infinite; }
      .button { fill: #2196F3; stroke: #1976D2; stroke-width: 2; cursor: pointer; }
      .button:hover { fill: #1976D2; }
      .button-text { fill: white; font-family: Arial, sans-serif; font-size: 12px; text-anchor: middle; pointer-events: none; }
      .label-text { fill: #333; font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; }
      .value-text { fill: #333; font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; text-anchor: middle; }
      .title-text { fill: #333; font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }

      @keyframes alarmPulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.3; }
      }
    </style>

    <radialGradient id="detectorGradient" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#ffffff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e0e0e0;stop-opacity:1" />
    </radialGradient>
  </defs>

  <!-- Title -->
  <text x="150" y="25" class="title-text">SMOKE DETECTOR</text>

  <!-- Main Detector Body -->
  <g id="detector-body">
    <!-- Base -->
    <circle cx="150" cy="130" r="80" class="smoke-detector-base" fill="url(#detectorGradient)"/>

    <!-- Ventilation slots -->
    <g class="smoke-detector-vent">
      <circle cx="150" cy="90" r="3"/>
      <circle cx="165" cy="95" r="3"/>
      <circle cx="175" cy="105" r="3"/>
      <circle cx="180" cy="120" r="3"/>
      <circle cx="180" cy="140" r="3"/>
      <circle cx="175" cy="155" r="3"/>
      <circle cx="165" cy="165" r="3"/>
      <circle cx="150" cy="170" r="3"/>
      <circle cx="135" cy="165" r="3"/>
      <circle cx="125" cy="155" r="3"/>
      <circle cx="120" cy="140" r="3"/>
      <circle cx="120" cy="120" r="3"/>
      <circle cx="125" cy="105" r="3"/>
      <circle cx="135" cy="95" r="3"/>
    </g>

    <!-- Center LED -->
    <circle cx="150" cy="130" r="12" id="status-led" class="status-normal"/>
    <circle cx="150" cy="130" r="8" fill="#ffffff" opacity="0.3"/>

    <!-- Alarm indicator ring -->
    <circle cx="150" cy="130" r="70" id="alarm-ring" class="alarm-indicator"
            stroke="#f44336" stroke-width="4" fill="none"/>
  </g>

  <!-- Status Display -->
  <rect x="60" y="230" width="180" height="40" rx="5" fill="#ffffff" stroke="#666" stroke-width="2"/>
  <text x="150" y="245" class="label-text">Status:</text>
  <text x="150" y="262" id="status-text" class="value-text">NORMAL</text>

  <!-- Battery Level Indicator -->
  <g id="battery-indicator">
    <text x="80" y="295" class="label-text">Battery:</text>
    <rect x="40" y="300" width="80" height="30" rx="3" class="battery-bg"/>
    <rect x="120" y="307" width="8" height="16" rx="2" class="battery-bg"/>
    <rect x="42" y="302" id="battery-fill" width="76" height="26" rx="2" class="battery-level"/>
    <text x="80" y="320" id="battery-text" class="value-text">100%</text>
  </g>

  <!-- Test Button -->
  <rect x="160" y="300" width="100" height="30" rx="5" id="test-button" class="button"/>
  <text x="210" y="320" class="button-text">TEST</text>
  <script><![CDATA[
//!export-start
let _pn_alarm = 0;          // Alarm: 0=normal, 1=alarm
let _pn_batteryLow = 0;     // Battery low: 0=ok, 1=low
let _ps_zone = "Office 301"; // Zone label
let _ps_lastTest = "12/01/2024"; // Last test date
//!export-end

function init() { update(); }

function update() {
  const alarmIndicator = document.getElementById('alarmIndicator');
  const batteryIndicator = document.getElementById('batteryIndicator');
  const zoneText = document.getElementById('zoneText');
  const lastTestText = document.getElementById('lastTestText');
  if (!alarmIndicator) return;
  alarmIndicator.setAttribute('fill', _pn_alarm ? '#f56565' : '#48bb78');
  if (batteryIndicator) batteryIndicator.setAttribute('fill', _pn_batteryLow ? '#ed8936' : '#48bb78');
  if (zoneText) zoneText.textContent = _ps_zone;
  if (lastTestText) lastTestText.textContent = _ps_lastTest;
}

function putValue(id, value) {
  if (id === '_pn_alarm') _pn_alarm = Number(value) || 0;
  else if (id === '_pn_batteryLow') _pn_batteryLow = Number(value) || 0;
  else if (id === '_ps_zone') _ps_zone = String(value);
  else if (id === '_ps_lastTest') _ps_lastTest = String(value);
  update();
}

init();
]]></script>
</svg>
