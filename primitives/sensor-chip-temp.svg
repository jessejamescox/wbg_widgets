<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 40" width="100%" height="100%">
  <defs>
    <style>
      .chip-body { fill: #ecf0f1; stroke: #95a5a6; stroke-width: 1.5; }
      .icon { fill: #e74c3c; }
      .value-text { font-family: Arial, sans-serif; font-size: 14px; fill: #2c3e50; font-weight: bold; }
      .unit-text { font-family: Arial, sans-serif; font-size: 9px; fill: #7f8c8d; }
      .label-text { font-family: Arial, sans-serif; font-size: 8px; fill: #95a5a6; }
      .alarm-state { fill: #e74c3c; }
      .normal-state { fill: #27ae60; }
    </style>
  </defs>

  <!-- Chip Body -->
  <rect x="2" y="2" width="76" height="36" class="chip-body" rx="4"/>

  <!-- Temperature Icon -->
  <g class="icon">
    <circle cx="15" cy="12" r="3.5"/>
    <rect x="13.5" y="12" width="3" height="12" rx="1"/>
    <circle cx="15" cy="25" r="5"/>
  </g>

  <!-- Value Display -->
  <text id="valueText" x="45" y="22" class="value-text" text-anchor="middle">72.5</text>
  <text id="unitText" x="67" y="22" class="unit-text">°F</text>

  <!-- Label -->
  <text x="40" y="34" class="label-text" text-anchor="middle">TEMPERATURE</text>

  <!-- Status Indicator -->
  <circle id="statusDot" cx="73" cy="8" r="3" class="normal-state"/>

  <script><![CDATA[
//!export-start
let _pn_temperature = 72.5;  // Temperature value
let _ps_units = 'F';         // Temperature units: 'F' or 'C'
let _pn_highAlarm = 80;      // High temperature alarm setpoint
let _pn_lowAlarm = 60;       // Low temperature alarm setpoint
let _pn_alarmState = 0;      // Alarm state: 0=normal, 1=alarm
//!export-end

function init() {
  update();
}

    function update() {
const valueText = document.getElementById('valueText');
const unitText = document.getElementById('unitText');
const statusDot = document.getElementById('statusDot');

  if (!valueText || !unitText || !statusDot) return;

      // Update value
      valueText.textContent = _pn_temperature.toFixed(1);
      unitText.textContent = '°' + _ps_units;

      // Check alarm conditions
      if (_pn_temperature > _pn_highAlarm || _pn_temperature < _pn_lowAlarm || _pn_alarmState === 1) {
        statusDot.setAttribute('class', 'alarm-state');
        valueText.setAttribute('fill', '#e74c3c');
      } else {
        statusDot.setAttribute('class', 'normal-state');
        valueText.setAttribute('fill', '#2c3e50');
      }
    }

function putValue(id, value) {
  if (id === '_pn_temperature') {
    _pn_temperature = Number(value) || 0;
    update();
  } else if (id === '_ps_units') {
    _ps_units = String(value) || "";
    update();
  } else if (id === '_pn_highAlarm') {
    _pn_highAlarm = Number(value) || 0;
    update();
  } else if (id === '_pn_lowAlarm') {
    _pn_lowAlarm = Number(value) || 0;
    update();
  } else if (id === '_pn_alarmState') {
    _pn_alarmState = Number(value) || 0;
    update();
  }
}

init();

]]></script>
</svg>
