<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 150" id="mode-indicator">
  <defs>
    <style>
      .mode-bg { fill: #1a1a1a; }
      .mode-container { stroke: #555; stroke-width: 3; rx: 10; }
      .mode-auto { fill: #4caf50; }
      .mode-manual { fill: #2196f3; }
      .mode-off { fill: #757575; }
      .mode-error { fill: #f44336; }
      .mode-maintenance { fill: #ff9800; }
      .mode-standby { fill: #9c27b0; }
      .mode-text { fill: #fff; font-family: Arial, sans-serif; text-anchor: middle; }
      .mode-title { font-size: 18px; font-weight: bold; }
      .mode-subtitle { font-size: 12px; fill: #ccc; }
      .mode-icon { fill: #fff; }
      .mode-status-dot { stroke: #fff; stroke-width: 2; }
    </style>

    <!-- Glow effect -->
    <filter id="modeGlow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Pulse animation -->
    <animate id="pulseAnim" attributeName="opacity" values="1;0.5;1" dur="2s" repeatCount="indefinite"/>
  </defs>

  <!-- Background -->
  <rect width="250" height="150" class="mode-bg"/>

  <!-- Main container -->
  <rect id="modeContainer" x="10" y="10" width="230" height="130" class="mode-container mode-auto" filter="url(#modeGlow)"/>

  <!-- Mode icon area -->
  <g id="modeIcon" transform="translate(125, 50)">
    <!-- Default: gear icon for auto mode -->
    <circle cx="0" cy="0" r="25" fill="#2e7d32" opacity="0.3"/>
    <path id="iconPath" class="mode-icon"
          d="M 0,-20 L 5,-18 L 7,-23 L 12,-21 L 10,-16 L 15,-14 L 13,-9 L 18,-7 L 16,-2 L 20,0 L 16,2 L 18,7 L 13,9 L 15,14 L 10,16 L 12,21 L 7,23 L 5,18 L 0,20 L -5,18 L -7,23 L -12,21 L -10,16 L -15,14 L -13,9 L -18,7 L -16,2 L -20,0 L -16,-2 L -18,-7 L -13,-9 L -15,-14 L -10,-16 L -12,-21 L -7,-23 L -5,-18 Z M 0,-12 A 12,12 0 1,1 0,12 A 12,12 0 1,1 0,-12"/>
  </g>

  <!-- Mode text -->
  <text id="modeText" x="125" y="105" class="mode-text mode-title">AUTO</text>
  <text id="modeSubtext" x="125" y="125" class="mode-text mode-subtitle">Automatic Operation</text>

  <!-- Status indicator dots -->
  <g id="statusDots" transform="translate(20, 25)">
    <circle cx="0" cy="0" r="5" id="dot1" class="mode-status-dot" fill="#4caf50">
      <animate attributeName="opacity" values="1;0.5;1" dur="2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="15" cy="0" r="5" id="dot2" class="mode-status-dot" fill="#4caf50" opacity="0.5">
      <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite"/>
    </circle>
    <circle cx="30" cy="0" r="5" id="dot3" class="mode-status-dot" fill="#4caf50" opacity="0.3">
      <animate attributeName="opacity" values="0.3;0.8;0.3" dur="2s" repeatCount="indefinite"/>
    </circle>
  </g>

  <script type="text/javascript">
    <![CDATA[
    (function() {
      var svg = document.getElementById('mode-indicator');
      var modeContainer = document.getElementById('modeContainer');
      var modeText = document.getElementById('modeText');
      var modeSubtext = document.getElementById('modeSubtext');
      var iconPath = document.getElementById('iconPath');
  <script><![CDATA[
//!export-start
let _pn_mode = 2;        // Mode: 0=Off, 1=Heat, 2=Cool, 3=Auto
let _ps_modeText = "Cooling"; // Mode text
//!export-end

function init() { update(); }

function update() {
  const modeText = document.getElementById('modeText');
  const indicator = document.getElementById('modeIndicator');
  if (!modeText) return;
  modeText.textContent = _ps_modeText;
  const colors = ['#718096', '#f56565', '#4299e1', '#48bb78'];
  if (indicator) indicator.setAttribute('fill', colors[_pn_mode] || colors[0]);
}

function putValue(id, value) {
  if (id === '_pn_mode') _pn_mode = Number(value) || 0;
  else if (id === '_ps_modeText') _ps_modeText = String(value);
  update();
}

init();
]]></script>
</svg>
