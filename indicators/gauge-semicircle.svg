<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 200" id="gauge-semicircle">
  <defs>
    <style>
      .gauge-bg { fill: #1a1a1a; }
      .gauge-arc { fill: none; stroke-width: 20; }
      .gauge-green { stroke: #4caf50; }
      .gauge-yellow { stroke: #ffc107; }
      .gauge-red { stroke: #f44336; }
      .gauge-needle { fill: #ff9800; stroke: #fff; stroke-width: 1; }
      .gauge-center { fill: #333; stroke: #fff; stroke-width: 2; }
      .gauge-text { fill: #fff; font-family: Arial, sans-serif; }
      .gauge-value { font-size: 28px; font-weight: bold; }
      .gauge-label { font-size: 14px; }
      .gauge-tick { stroke: #999; stroke-width: 1; }
    </style>
  </defs>

  <!-- Background -->
  <rect width="300" height="200" class="gauge-bg"/>

  <!-- Colored zones (green 0-60%, yellow 60-80%, red 80-100%) -->
  <path id="greenZone" class="gauge-arc gauge-green"
        d="M 50,150 A 100,100 0 0,1 110,56.7"/>
  <path id="yellowZone" class="gauge-arc gauge-yellow"
        d="M 110,56.7 A 100,100 0 0,1 170,30"/>
  <path id="redZone" class="gauge-arc gauge-red"
        d="M 170,30 A 100,100 0 0,1 250,150"/>

  <!-- Tick marks -->
  <g id="tickMarks">
    <line x1="50" y1="150" x2="40" y2="150" class="gauge-tick"/>
    <line x1="60" y1="100" x2="52" y2="95" class="gauge-tick"/>
    <line x1="90" y1="62" x2="84" y2="55" class="gauge-tick"/>
    <line x1="150" y1="50" x2="150" y2="40" class="gauge-tick"/>
    <line x1="210" y1="62" x2="216" y2="55" class="gauge-tick"/>
    <line x1="240" y1="100" x2="248" y2="95" class="gauge-tick"/>
    <line x1="250" y1="150" x2="260" y2="150" class="gauge-tick"/>
  </g>

  <!-- Scale labels -->
  <text x="35" y="155" class="gauge-text gauge-label" text-anchor="middle">0</text>
  <text x="60" y="90" class="gauge-text gauge-label" text-anchor="middle">25</text>
  <text x="150" y="35" class="gauge-text gauge-label" text-anchor="middle">50</text>
  <text x="240" y="90" class="gauge-text gauge-label" text-anchor="middle">75</text>
  <text x="265" y="155" class="gauge-text gauge-label" text-anchor="middle">100</text>

  <!-- Needle -->
  <g id="needle" transform="rotate(-90 150 150)">
    <polygon points="150,150 155,55 150,45 145,55" class="gauge-needle"/>
  </g>

  <!-- Center hub -->
  <circle cx="150" cy="150" r="12" class="gauge-center"/>

  <!-- Value display -->
  <text id="valueText" x="150" y="180" class="gauge-text gauge-value" text-anchor="middle">0</text>
  <text id="unitText" x="150" y="195" class="gauge-text gauge-label" text-anchor="middle">Units</text>

  <script><![CDATA[
//!export-start
let _pn_value = 68;  // Current value
let _pn_min = 0;    // Minimum value
let _pn_max = 100;  // Maximum value
let _ps_label = "Flow"; // Label
let _ps_units = "GPM"; // Units
//!export-end

function init() { update(); }

function update() {
  const needle = document.getElementById('needle');
  const valueText = document.getElementById('valueText');
  if (!needle) return;
  const percentage = ((_pn_value - _pn_min) / (_pn_max - _pn_min));
  const angle = -90 + (percentage * 180);
  needle.setAttribute('transform', `rotate(${angle} 100 100)`);
  if (valueText) valueText.textContent = _pn_value.toFixed(1) + ' ' + _ps_units;
}

function putValue(id, value) {
  if (id === '_pn_value') _pn_value = Number(value) || 0;
  else if (id === '_pn_min') _pn_min = Number(value) || 0;
  else if (id === '_pn_max') _pn_max = Number(value) || 0;
  else if (id === '_ps_label') _ps_label = String(value);
  else if (id === '_ps_units') _ps_units = String(value);
  update();
}

init();
]]></script>
</svg>
