<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 150" id="trend-mini">
  <defs>
    <style>
      .trend-bg { fill: #1a1a1a; }
      .trend-line { fill: none; stroke: #2196f3; stroke-width: 2; }
      .trend-area { fill: url(#trendGradient); opacity: 0.3; }
      .trend-grid { stroke: #333; stroke-width: 0.5; }
      .trend-text { fill: #fff; font-family: Arial, sans-serif; }
      .trend-value { font-size: 20px; font-weight: bold; }
      .trend-label { font-size: 11px; }
      .trend-dot { fill: #2196f3; stroke: #fff; stroke-width: 2; }
      .trend-stats { font-size: 10px; fill: #999; }
    </style>
    <linearGradient id="trendGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2196f3;stop-opacity:0.8" />
      <stop offset="100%" style="stop-color:#2196f3;stop-opacity:0.1" />
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="300" height="150" class="trend-bg"/>

  <!-- Title -->
  <text id="titleText" x="10" y="15" class="trend-text trend-label">Trend (24 points)</text>

  <!-- Grid lines -->
  <g id="grid">
    <line x1="20" y1="30" x2="280" y2="30" class="trend-grid"/>
    <line x1="20" y1="60" x2="280" y2="60" class="trend-grid"/>
    <line x1="20" y1="90" x2="280" y2="90" class="trend-grid"/>
    <line x1="20" y1="120" x2="280" y2="120" class="trend-grid"/>
  </g>

  <!-- Chart area -->
  <clipPath id="chartClip">
    <rect x="20" y="25" width="260" height="100"/>
  </clipPath>

  <g clip-path="url(#chartClip)">
    <!-- Area fill -->
    <path id="areaPath" class="trend-area" d="M 20,120 L 20,120 L 280,120 Z"/>

    <!-- Line path -->
    <path id="linePath" class="trend-line" d="M 20,90"/>
  </g>

  <!-- Current value dot -->
  <circle id="currentDot" cx="280" cy="90" r="4" class="trend-dot"/>

  <!-- Value displays -->
  <text id="currentValue" x="290" y="95" class="trend-text trend-value" text-anchor="end">0</text>
  <text id="minValue" x="10" y="128" class="trend-text trend-stats" text-anchor="start">Min: 0</text>
  <text id="maxValue" x="10" y="138" class="trend-text trend-stats" text-anchor="start">Max: 0</text>
  <text id="avgValue" x="10" y="148" class="trend-text trend-stats" text-anchor="start">Avg: 0</text>

  <script><![CDATA[
//!export-start
let _pn_value = 72.5;   // Current value
let _pn_min = 60;      // Minimum value for scale
let _pn_max = 85;      // Maximum value for scale
let _ps_label = "Temp"; // Label
let _ps_trend = "up";   // Trend: up, down, stable
//!export-end

function init() { update(); }

function update() {
  const valueText = document.getElementById('valueText');
  const labelText = document.getElementById('labelText');
  const trendIcon = document.getElementById('trendIcon');
  if (!valueText) return;
  valueText.textContent = _pn_value.toFixed(1);
  if (labelText) labelText.textContent = _ps_label;
  if (trendIcon) {
    if (_ps_trend === 'up') trendIcon.textContent = '↑';
    else if (_ps_trend === 'down') trendIcon.textContent = '↓';
    else trendIcon.textContent = '→';
  }
}

function putValue(id, value) {
  if (id === '_pn_value') _pn_value = Number(value) || 0;
  else if (id === '_pn_min') _pn_min = Number(value) || 0;
  else if (id === '_pn_max') _pn_max = Number(value) || 0;
  else if (id === '_ps_label') _ps_label = String(value);
  else if (id === '_ps_trend') _ps_trend = String(value);
  update();
}

init();
]]></script>
</svg>
