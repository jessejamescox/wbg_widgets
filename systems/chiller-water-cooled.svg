<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 700" width="100%" height="100%">
  <defs>
    <linearGradient id="chillerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2c5f8d;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a3a5a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="compGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4a7ba7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2c5f8d;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="towerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5a8fb8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3a6f98;stop-opacity:1" />
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="700" fill="#1a1a1a"/>

  <!-- Title -->
  <text x="450" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">WATER-COOLED CHILLER SYSTEM</text>

  <!-- Main Chiller Body -->
  <g id="chiller-body">
    <rect x="150" y="180" width="300" height="280" fill="url(#chillerGrad)" stroke="#4a9eff" stroke-width="3" rx="8"/>
    <text x="300" y="210" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">WATER-COOLED CHILLER</text>

    <!-- Status Indicator -->
    <circle id="chiller-status" cx="420" cy="200" r="12" fill="#00ff00" stroke="#ffffff" stroke-width="2" filter="url(#glow)"/>

    <!-- Compressor -->
    <g id="compressor">
      <rect x="190" y="250" width="90" height="90" fill="#1a3a5a" stroke="#4a9eff" stroke-width="2" rx="5"/>
      <text x="235" y="272" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">COMP</text>

      <circle cx="235" cy="305" r="30" fill="url(#compGrad)" stroke="#4a9eff" stroke-width="2"/>
      <circle cx="235" cy="305" r="22" fill="none" stroke="#4a9eff" stroke-width="2"/>

      <!-- Rotation indicator -->
      <g id="comp-rotation">
        <line x1="235" y1="283" x2="235" y2="305" stroke="#00ff00" stroke-width="2.5" stroke-linecap="round"/>
        <line x1="235" y1="305" x2="257" y2="305" stroke="#00ff00" stroke-width="2.5" stroke-linecap="round"/>
        <animateTransform
          attributeName="transform"
          attributeType="XML"
          type="rotate"
          from="0 235 305"
          to="360 235 305"
          dur="2s"
          repeatCount="indefinite"/>
      </g>
    </g>

    <!-- Evaporator -->
    <g id="evaporator">
      <rect x="310" y="250" width="120" height="80" fill="#1a3a5a" stroke="#4a9eff" stroke-width="2" rx="5"/>
      <text x="370" y="272" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">EVAPORATOR</text>

      <!-- Heat exchanger tubes -->
      <line x1="320" y1="290" x2="420" y2="290" stroke="#4a9eff" stroke-width="2"/>
      <line x1="320" y1="298" x2="420" y2="298" stroke="#4a9eff" stroke-width="2"/>
      <line x1="320" y1="306" x2="420" y2="306" stroke="#4a9eff" stroke-width="2"/>
      <line x1="320" y1="314" x2="420" y2="314" stroke="#4a9eff" stroke-width="2"/>

      <!-- CHW labels -->
      <text x="325" y="288" font-family="Arial" font-size="8" fill="#ffaa00">IN</text>
      <text x="405" y="288" font-family="Arial" font-size="8" fill="#4a9eff">OUT</text>
    </g>

    <!-- Condenser -->
    <g id="condenser">
      <rect x="310" y="360" width="120" height="80" fill="#1a3a5a" stroke="#ff6b35" stroke-width="2" rx="5"/>
      <text x="370" y="382" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">CONDENSER</text>

      <!-- Heat exchanger tubes -->
      <line x1="320" y1="400" x2="420" y2="400" stroke="#ff6b35" stroke-width="2"/>
      <line x1="320" y1="408" x2="420" y2="408" stroke="#ff6b35" stroke-width="2"/>
      <line x1="320" y1="416" x2="420" y2="416" stroke="#ff6b35" stroke-width="2"/>
      <line x1="320" y1="424" x2="420" y2="424" stroke="#ff6b35" stroke-width="2"/>

      <!-- CW labels -->
      <text x="325" y="398" font-family="Arial" font-size="8" fill="#4a9eff">IN</text>
      <text x="405" y="398" font-family="Arial" font-size="8" fill="#ff6b35">OUT</text>
    </g>

    <!-- Refrigerant Circuit -->
    <g id="refrigerant">
      <!-- High Pressure -->
      <path d="M 235 275 L 235 260 L 340 260 L 340 360" stroke="#ff0000" stroke-width="3" fill="none"/>
      <text x="270" y="255" font-family="Arial" font-size="9" fill="#ff0000">HIGH P</text>

      <!-- Low Pressure -->
      <path d="M 340 330 L 340 345 L 235 345" stroke="#4a9eff" stroke-width="3" fill="none"/>
      <text x="270" y="358" font-family="Arial" font-size="9" fill="#4a9eff">LOW P</text>

      <!-- Expansion Valve -->
      <rect x="337" y="345" width="6" height="15" fill="#ffaa00" stroke="#ffffff" stroke-width="1"/>
      <text x="350" y="355" font-family="Arial" font-size="8" fill="#ffaa00">EXV</text>
    </g>
  </g>

  <!-- Cooling Tower -->
  <g id="cooling-tower">
    <rect x="600" y="80" width="200" height="240" fill="url(#towerGrad)" stroke="#ff6b35" stroke-width="3" rx="5"/>
    <text x="700" y="110" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">COOLING TOWER</text>

    <!-- Tower top -->
    <path d="M 600 80 L 700 55 L 800 80 Z" fill="#3a6f98" stroke="#ff6b35" stroke-width="2"/>

    <!-- Fan -->
    <circle cx="700" cy="70" r="12" fill="#2c5f8d" stroke="#ff6b35" stroke-width="2"/>
    <g id="tower-fan">
      <path d="M 700 62 L 700 78 M 692 70 L 708 70" stroke="#4a9eff" stroke-width="2" stroke-linecap="round"/>
      <animateTransform
        attributeName="transform"
        attributeType="XML"
        type="rotate"
        from="0 700 70"
        to="360 700 70"
        dur="1.5s"
        repeatCount="indefinite"/>
    </g>

    <!-- Fill -->
    <rect x="620" y="130" width="160" height="100" fill="#1a3a5a" stroke="#4a9eff" stroke-width="1" rx="3"/>
    <text x="700" y="160" font-family="Arial" font-size="11" fill="#ffffff" text-anchor="middle">FILL</text>

    <!-- Water distribution -->
    <g opacity="0.6">
      <line x1="630" y1="145" x2="770" y2="145" stroke="#4a9eff" stroke-width="1"/>
      <line x1="630" y1="160" x2="770" y2="160" stroke="#4a9eff" stroke-width="1"/>
      <line x1="630" y1="175" x2="770" y2="175" stroke="#4a9eff" stroke-width="1"/>
      <line x1="630" y1="190" x2="770" y2="190" stroke="#4a9eff" stroke-width="1"/>
      <line x1="630" y1="205" x2="770" y2="205" stroke="#4a9eff" stroke-width="1"/>
      <line x1="630" y1="220" x2="770" y2="220" stroke="#4a9eff" stroke-width="1"/>
    </g>

    <!-- Basin -->
    <rect x="610" y="250" width="180" height="50" fill="#1a3a5a" stroke="#4a9eff" stroke-width="2" rx="3"/>
    <text x="700" y="280" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">BASIN</text>

    <!-- Tower Status -->
    <circle id="tower-status" cx="770" cy="100" r="8" fill="#00ff00" stroke="#ffffff" stroke-width="2"/>
    <text x="700" y="310" font-family="Arial" font-size="10" fill="#4a9eff" text-anchor="middle" id="tower-fan-speed">Fan: 85%</text>
  </g>

  <!-- Condenser Water Piping -->
  <g id="cw-piping">
    <!-- CW Supply (from tower to chiller) -->
    <path d="M 700 300 L 700 400 L 430 400" stroke="#4a9eff" stroke-width="6" fill="none"/>
    <text x="550" y="395" font-family="Arial" font-size="11" fill="#4a9eff">CW SUPPLY</text>

    <!-- CW Return (from chiller to tower) -->
    <path d="M 430 420 L 550 420 L 550 140 L 600 140" stroke="#ff6b35" stroke-width="6" fill="none"/>
    <text x="490" y="435" font-family="Arial" font-size="11" fill="#ff6b35">CW RETURN</text>

    <!-- CW Pump -->
    <circle id="cw-pump" cx="580" cy="400" r="28" fill="url(#compGrad)" stroke="#4a9eff" stroke-width="2"/>
    <path d="M 580 380 L 592 400 L 580 420 Z" fill="#4a9eff"/>
    <circle id="cwp-status" cx="608" cy="380" r="7" fill="#00ff00" stroke="#ffffff" stroke-width="1"/>
    <text x="580" y="445" font-family="Arial" font-size="10" fill="#4a9eff" text-anchor="middle" id="cwp-speed">95%</text>
  </g>

  <!-- Chilled Water Piping -->
  <g id="chw-piping">
    <!-- CHW Return -->
    <rect x="305" y="240" width="10" height="20" fill="#ffaa00" stroke="#ffaa00" stroke-width="2"/>
    <text x="280" y="253" font-family="Arial" font-size="10" fill="#ffaa00" text-anchor="end">CHW Return</text>

    <!-- CHW Supply -->
    <rect x="430" y="280" width="10" height="20" fill="#4a9eff" stroke="#4a9eff" stroke-width="2"/>
    <text x="455" y="293" font-family="Arial" font-size="10" fill="#4a9eff">CHW Supply</text>

    <!-- CHW Pump -->
    <circle id="chw-pump" cx="80" cy="290" r="28" fill="url(#compGrad)" stroke="#4a9eff" stroke-width="2"/>
    <path d="M 80 270 L 92 290 L 80 310 Z" fill="#4a9eff"/>
    <circle id="chwp-status" cx="108" cy="270" r="7" fill="#00ff00" stroke="#ffffff" stroke-width="1"/>
    <text x="80" y="335" font-family="Arial" font-size="10" fill="#4a9eff" text-anchor="middle" id="chwp-speed">82%</text>

    <!-- CHW Supply Line -->
    <path d="M 440 290 L 500 290" stroke="#4a9eff" stroke-width="5" fill="none"/>
    <!-- CHW Return Line -->
    <path d="M 108 290 L 310 290 L 310 250" stroke="#ffaa00" stroke-width="5" fill="none"/>
  </g>

  <!-- Control Panel -->
  <g id="control-panel">
    <rect x="150" y="480" width="300" height="180" fill="#0d1b2a" stroke="#4a9eff" stroke-width="2" rx="5"/>
    <text x="300" y="510" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">CHILLER CONTROL</text>

    <!-- Setpoint -->
    <text x="170" y="540" font-family="Arial" font-size="12" fill="#4a9eff">CHW Setpoint:</text>
    <text x="410" y="540" font-family="Arial" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="end" id="setpoint">42.0°F</text>

    <!-- Load -->
    <text x="170" y="565" font-family="Arial" font-size="12" fill="#4a9eff">Chiller Load:</text>
    <text x="410" y="565" font-family="Arial" font-size="14" font-weight="bold" fill="#00ff00" text-anchor="end" id="load">78%</text>

    <!-- Capacity -->
    <text x="170" y="590" font-family="Arial" font-size="12" fill="#4a9eff">Capacity:</text>
    <text x="410" y="590" font-family="Arial" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="end" id="capacity">650 Tons</text>

    <!-- Power -->
    <text x="170" y="615" font-family="Arial" font-size="12" fill="#4a9eff">Power:</text>
    <text x="410" y="615" font-family="Arial" font-size="14" font-weight="bold" fill="#ffaa00" text-anchor="end" id="power">375 kW</text>

    <!-- Efficiency -->
    <text x="170" y="640" font-family="Arial" font-size="12" fill="#4a9eff">Efficiency:</text>
    <text x="410" y="640" font-family="Arial" font-size="14" font-weight="bold" fill="#00ff00" text-anchor="end" id="efficiency">0.58 kW/Ton</text>
  </g>

  <!-- Temperature Display -->
  <g id="temp-display">
    <rect x="500" y="480" width="350" height="180" fill="#0d1b2a" stroke="#4a9eff" stroke-width="2" rx="5"/>
    <text x="675" y="510" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">TEMPERATURES</text>

    <!-- CHW Supply -->
    <text x="520" y="540" font-family="Arial" font-size="12" fill="#4a9eff">CHW Supply:</text>
    <text x="810" y="540" font-family="Arial" font-size="16" font-weight="bold" fill="#4a9eff" text-anchor="end" id="chws-temp">42.8°F</text>

    <!-- CHW Return -->
    <text x="520" y="565" font-family="Arial" font-size="12" fill="#ffaa00">CHW Return:</text>
    <text x="810" y="565" font-family="Arial" font-size="16" font-weight="bold" fill="#ffaa00" text-anchor="end" id="chwr-temp">56.5°F</text>

    <!-- CW Supply -->
    <text x="520" y="590" font-family="Arial" font-size="12" fill="#4a9eff">CW Supply:</text>
    <text x="810" y="590" font-family="Arial" font-size="16" font-weight="bold" fill="#4a9eff" text-anchor="end" id="cws-temp">75.2°F</text>

    <!-- CW Return -->
    <text x="520" y="615" font-family="Arial" font-size="12" fill="#ff6b35">CW Return:</text>
    <text x="810" y="615" font-family="Arial" font-size="16" font-weight="bold" fill="#ff6b35" text-anchor="end" id="cwr-temp">85.8°F</text>

    <!-- Approach -->
    <text x="520" y="640" font-family="Arial" font-size="12" fill="#ffffff">CT Approach:</text>
    <text x="810" y="640" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="end" id="approach">7.2°F</text>
  </g>

  <script><![CDATA[
function init() {
  update();
}

// FUXA Integration Variables
let waterCooledChiller = {
      // Chiller Status
      chiller_status: true,
      load: 78,
      capacity: 650,
      power: 375,
      efficiency: 0.58,
      setpoint: 42.0,

      // CHW Temperatures
      chws_temp: 42.8,
      chwr_temp: 56.5,

      // CW Temperatures
      cws_temp: 75.2,
      cwr_temp: 85.8,

      // Cooling Tower
      tower_status: true,
      tower_fan_speed: 85,
      approach: 7.2,

      // Pumps
      chwp_status: true,
      chwp_speed: 82,
      cwp_status: true,
      cwp_speed: 95
    };

    function updateDisplay() {
      // Update Chiller Status
      document.getElementById('chiller-status').setAttribute('fill',
        waterCooledChiller.chiller_status ? '#00ff00' : '#ff0000');

      // Update Control Panel
      document.getElementById('setpoint').textContent = waterCooledChiller.setpoint.toFixed(1) + '°F';
      document.getElementById('load').textContent = waterCooledChiller.load + '%';
      document.getElementById('capacity').textContent = waterCooledChiller.capacity + ' Tons';
      document.getElementById('power').textContent = waterCooledChiller.power + ' kW';
      document.getElementById('efficiency').textContent = waterCooledChiller.efficiency.toFixed(2) + ' kW/Ton';

      // Update Temperatures
      document.getElementById('chws-temp').textContent = waterCooledChiller.chws_temp.toFixed(1) + '°F';
      document.getElementById('chwr-temp').textContent = waterCooledChiller.chwr_temp.toFixed(1) + '°F';
      document.getElementById('cws-temp').textContent = waterCooledChiller.cws_temp.toFixed(1) + '°F';
      document.getElementById('cwr-temp').textContent = waterCooledChiller.cwr_temp.toFixed(1) + '°F';
      document.getElementById('approach').textContent = waterCooledChiller.approach.toFixed(1) + '°F';

      // Update Cooling Tower
      document.getElementById('tower-status').setAttribute('fill',
        waterCooledChiller.tower_status ? '#00ff00' : '#ff0000');
      document.getElementById('tower-fan-speed').textContent =
        waterCooledChiller.tower_status ? 'Fan: ' + waterCooledChiller.tower_fan_speed + '%' : 'Fan: OFF';

      // Update CHW Pump
      document.getElementById('chwp-status').setAttribute('fill',
        waterCooledChiller.chwp_status ? '#00ff00' : '#ff0000');
      document.getElementById('chwp-speed').textContent =
        waterCooledChiller.chwp_status ? waterCooledChiller.chwp_speed + '%' : 'OFF';

      // Update CW Pump
      document.getElementById('cwp-status').setAttribute('fill',
        waterCooledChiller.cwp_status ? '#00ff00' : '#ff0000');
      document.getElementById('cwp-speed').textContent =
        waterCooledChiller.cwp_status ? waterCooledChiller.cwp_speed + '%' : 'OFF';
    }

    // Initialize display
    updateDisplay();

    // Update every second
    setInterval(updateDisplay, 1000);

init();
]]></script>
</svg>
