<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" width="100%" height="100%">
  <defs>
    <linearGradient id="boilerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8d4a2c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5a2f1a;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="pumpGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4a7ba7;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2c5f8d;stop-opacity:1" />
    </linearGradient>
    <radialGradient id="flameGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" style="stop-color:#ffff00;stop-opacity:1" />
      <stop offset="40%" style="stop-color:#ff6b35;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ff0000;stop-opacity:0.5" />
    </radialGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge>
        <feMergeNode in="coloredBlur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1200" height="800" fill="#1a1a1a"/>

  <!-- Title -->
  <text x="600" y="30" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#ffffff" text-anchor="middle">BOILER PLANT</text>

  <!-- Boiler 1 (Lead) -->
  <g id="boiler-1">
    <rect x="100" y="120" width="200" height="260" fill="url(#boilerGrad)" stroke="#ff6b35" stroke-width="3" rx="5"/>
    <text x="200" y="150" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">BOILER 1 - LEAD</text>

    <!-- Status -->
    <circle id="b1-status" cx="270" cy="140" r="10" fill="#00ff00" stroke="#ffffff" stroke-width="2" filter="url(#glow)"/>

    <!-- Pressure Gauge -->
    <circle cx="140" cy="190" r="25" fill="#0d1b2a" stroke="#4a9eff" stroke-width="2"/>
    <text x="140" y="183" font-family="Arial" font-size="8" fill="#4a9eff" text-anchor="middle">PSI</text>
    <text x="140" y="198" font-family="Arial" font-size="12" font-weight="bold" fill="#00ff00" text-anchor="middle" id="b1-pressure">45</text>

    <!-- Temp Gauge -->
    <circle cx="260" cy="190" r="25" fill="#0d1b2a" stroke="#ff6b35" stroke-width="2"/>
    <text x="260" y="183" font-family="Arial" font-size="8" fill="#ff6b35" text-anchor="middle">TEMP</text>
    <text x="260" y="198" font-family="Arial" font-size="12" font-weight="bold" fill="#ff6b35" text-anchor="middle" id="b1-temp">180°F</text>

    <!-- Burner -->
    <rect x="120" y="240" width="60" height="60" fill="#2c2c2c" stroke="#ff6b35" stroke-width="2" rx="3"/>
    <text x="150" y="260" font-family="Arial" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">BURNER</text>

    <!-- Flame -->
    <ellipse cx="150" cy="280" rx="15" ry="20" fill="url(#flameGrad)" filter="url(#glow)">
      <animate attributeName="ry" values="20;24;20" dur="0.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="1;0.8;1" dur="0.5s" repeatCount="indefinite"/>
    </ellipse>

    <!-- Values -->
    <text x="200" y="335" font-family="Arial" font-size="11" fill="#ff6b35" text-anchor="middle" id="b1-fire">Fire: 85%</text>
    <text x="200" y="355" font-family="Arial" font-size="11" fill="#00ff00" text-anchor="middle" id="b1-output">4.2 MMBtu/h</text>
    <text x="200" y="370" font-family="Arial" font-size="10" fill="#4a9eff" text-anchor="middle" id="b1-eff">Eff: 86%</text>
  </g>

  <!-- Boiler 2 (Lag) -->
  <g id="boiler-2">
    <rect x="340" y="120" width="200" height="260" fill="url(#boilerGrad)" stroke="#ff6b35" stroke-width="3" rx="5"/>
    <text x="440" y="150" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">BOILER 2 - LAG</text>

    <circle id="b2-status" cx="510" cy="140" r="10" fill="#00ff00" stroke="#ffffff" stroke-width="2" filter="url(#glow)"/>

    <circle cx="380" cy="190" r="25" fill="#0d1b2a" stroke="#4a9eff" stroke-width="2"/>
    <text x="380" y="183" font-family="Arial" font-size="8" fill="#4a9eff" text-anchor="middle">PSI</text>
    <text x="380" y="198" font-family="Arial" font-size="12" font-weight="bold" fill="#00ff00" text-anchor="middle" id="b2-pressure">45</text>

    <circle cx="500" cy="190" r="25" fill="#0d1b2a" stroke="#ff6b35" stroke-width="2"/>
    <text x="500" y="183" font-family="Arial" font-size="8" fill="#ff6b35" text-anchor="middle">TEMP</text>
    <text x="500" y="198" font-family="Arial" font-size="12" font-weight="bold" fill="#ff6b35" text-anchor="middle" id="b2-temp">180°F</text>

    <rect x="360" y="240" width="60" height="60" fill="#2c2c2c" stroke="#ff6b35" stroke-width="2" rx="3"/>
    <text x="390" y="260" font-family="Arial" font-size="10" font-weight="bold" fill="#ffffff" text-anchor="middle">BURNER</text>

    <ellipse cx="390" cy="280" rx="15" ry="20" fill="url(#flameGrad)" filter="url(#glow)">
      <animate attributeName="ry" values="20;24;20" dur="0.5s" repeatCount="indefinite"/>
      <animate attributeName="opacity" values="1;0.8;1" dur="0.5s" repeatCount="indefinite"/>
    </ellipse>

    <text x="440" y="335" font-family="Arial" font-size="11" fill="#ff6b35" text-anchor="middle" id="b2-fire">Fire: 72%</text>
    <text x="440" y="355" font-family="Arial" font-size="11" fill="#00ff00" text-anchor="middle" id="b2-output">3.6 MMBtu/h</text>
    <text x="440" y="370" font-family="Arial" font-size="10" fill="#4a9eff" text-anchor="middle" id="b2-eff">Eff: 85%</text>
  </g>

  <!-- Boiler 3 (Standby) -->
  <g id="boiler-3">
    <rect x="580" y="120" width="200" height="260" fill="url(#boilerGrad)" stroke="#666666" stroke-width="3" rx="5"/>
    <text x="680" y="150" font-family="Arial" font-size="16" font-weight="bold" fill="#999999" text-anchor="middle">BOILER 3 - STBY</text>

    <circle id="b3-status" cx="750" cy="140" r="10" fill="#666666" stroke="#ffffff" stroke-width="2"/>

    <circle cx="620" cy="190" r="25" fill="#0d1b2a" stroke="#666666" stroke-width="2"/>
    <text x="620" y="183" font-family="Arial" font-size="8" fill="#666666" text-anchor="middle">PSI</text>
    <text x="620" y="198" font-family="Arial" font-size="12" font-weight="bold" fill="#666666" text-anchor="middle" id="b3-pressure">0</text>

    <circle cx="740" cy="190" r="25" fill="#0d1b2a" stroke="#666666" stroke-width="2"/>
    <text x="740" y="183" font-family="Arial" font-size="8" fill="#666666" text-anchor="middle">TEMP</text>
    <text x="740" y="198" font-family="Arial" font-size="12" font-weight="bold" fill="#666666" text-anchor="middle" id="b3-temp">OFF</text>

    <rect x="600" y="240" width="60" height="60" fill="#2c2c2c" stroke="#666666" stroke-width="2" rx="3"/>
    <text x="630" y="260" font-family="Arial" font-size="10" font-weight="bold" fill="#999999" text-anchor="middle">BURNER</text>

    <text x="680" y="335" font-family="Arial" font-size="11" fill="#666666" text-anchor="middle" id="b3-fire">Fire: 0%</text>
    <text x="680" y="355" font-family="Arial" font-size="11" fill="#666666" text-anchor="middle" id="b3-output">STANDBY</text>
    <text x="680" y="370" font-family="Arial" font-size="10" fill="#666666" text-anchor="middle" id="b3-eff">---</text>
  </g>

  <!-- Hot Water Supply Header -->
  <g id="hw-supply-header">
    <rect x="100" y="420" width="680" height="100" fill="#1a3a5a" stroke="#ff6b35" stroke-width="3" rx="5"/>
    <text x="440" y="445" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">HOT WATER SUPPLY HEADER</text>

    <!-- Supply Temp -->
    <text x="150" y="475" font-family="Arial" font-size="12" fill="#ff6b35">Supply Temp:</text>
    <text x="150" y="495" font-family="Arial" font-size="18" font-weight="bold" fill="#ff6b35" id="hws-temp">180°F</text>

    <!-- Pressure -->
    <text x="320" y="475" font-family="Arial" font-size="12" fill="#4a9eff">Pressure:</text>
    <text x="320" y="495" font-family="Arial" font-size="18" font-weight="bold" fill="#00ff00" id="header-pressure">45 PSI</text>

    <!-- Flow Rate -->
    <text x="480" y="475" font-family="Arial" font-size="12" fill="#4a9eff">Flow Rate:</text>
    <text x="480" y="495" font-family="Arial" font-size="18" font-weight="bold" fill="#4a9eff" id="hw-flow">850 GPM</text>

    <!-- Total Output -->
    <text x="630" y="475" font-family="Arial" font-size="12" fill="#00ff00">Total Output:</text>
    <text x="630" y="495" font-family="Arial" font-size="18" font-weight="bold" fill="#00ff00" id="total-output">7.8 MMBtu/h</text>
  </g>

  <!-- Hot Water Return Header -->
  <g id="hw-return-header">
    <rect x="100" y="550" width="680" height="60" fill="#1a3a5a" stroke="#4a9eff" stroke-width="3" rx="5"/>
    <text x="440" y="575" font-family="Arial" font-size="16" font-weight="bold" fill="#ffffff" text-anchor="middle">HOT WATER RETURN HEADER</text>

    <!-- Return Temp -->
    <text x="200" y="595" font-family="Arial" font-size="12" fill="#4a9eff">Return Temp:</text>
    <text x="340" y="595" font-family="Arial" font-size="18" font-weight="bold" fill="#4a9eff" id="hwr-temp">160°F</text>

    <!-- Delta T -->
    <text x="500" y="595" font-family="Arial" font-size="12" fill="#ffffff">Delta T:</text>
    <text x="620" y="595" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" id="delta-t">20°F</text>
  </g>

  <!-- Primary Pumps -->
  <g id="primary-pumps">
    <text x="200" y="400" font-family="Arial" font-size="12" font-weight="bold" fill="#ffffff">PRIMARY PUMPS</text>

    <!-- Pump 1 -->
    <circle id="pump1" cx="150" cy="390" r="22" fill="url(#pumpGrad)" stroke="#4a9eff" stroke-width="2"/>
    <path d="M 150 375 L 158 390 L 150 405 Z" fill="#4a9eff"/>
    <circle id="p1-status" cx="172" cy="375" r="5" fill="#00ff00" stroke="#ffffff" stroke-width="1"/>
    <text x="150" y="418" font-family="Arial" font-size="9" fill="#4a9eff" text-anchor="middle" id="p1-speed">90%</text>

    <!-- Pump 2 -->
    <circle id="pump2" cx="230" cy="390" r="22" fill="url(#pumpGrad)" stroke="#4a9eff" stroke-width="2"/>
    <path d="M 230 375 L 238 390 L 230 405 Z" fill="#4a9eff"/>
    <circle id="p2-status" cx="252" cy="375" r="5" fill="#00ff00" stroke="#ffffff" stroke-width="1"/>
    <text x="230" y="418" font-family="Arial" font-size="9" fill="#4a9eff" text-anchor="middle" id="p2-speed">88%</text>

    <!-- Pump 3 -->
    <circle id="pump3" cx="310" cy="390" r="22" fill="url(#pumpGrad)" stroke="#666666" stroke-width="2"/>
    <path d="M 310 375 L 318 390 L 310 405 Z" fill="#666666"/>
    <circle id="p3-status" cx="332" cy="375" r="5" fill="#666666" stroke="#ffffff" stroke-width="1"/>
    <text x="310" y="418" font-family="Arial" font-size="9" fill="#666666" text-anchor="middle" id="p3-speed">OFF</text>
  </g>

  <!-- Boiler Connections -->
  <line x1="200" y1="380" x2="200" y2="420" stroke="#ff6b35" stroke-width="5"/>
  <line x1="440" y1="380" x2="440" y2="420" stroke="#ff6b35" stroke-width="5"/>

  <line x1="200" y1="520" x2="200" y2="550" stroke="#4a9eff" stroke-width="5"/>
  <line x1="440" y1="520" x2="440" y2="550" stroke="#4a9eff" stroke-width="5"/>

  <!-- System Control Panel -->
  <g id="control-panel">
    <rect x="820" y="120" width="340" height="260" fill="#0d1b2a" stroke="#4a9eff" stroke-width="2" rx="5"/>
    <text x="990" y="150" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">PLANT CONTROL</text>

    <!-- Lead/Lag Control -->
    <rect x="840" y="170" width="300" height="50" fill="#1a3a5a" stroke="#00ff00" stroke-width="2" rx="3"/>
    <text x="850" y="190" font-family="Arial" font-size="12" fill="#00ff00">Control Mode:</text>
    <text x="1100" y="190" font-family="Arial" font-size="14" font-weight="bold" fill="#00ff00" text-anchor="end" id="control-mode">LEAD/LAG</text>
    <text x="850" y="210" font-family="Arial" font-size="12" fill="#4a9eff">Active Boilers:</text>
    <text x="1100" y="210" font-family="Arial" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="end" id="active-boilers">2 of 3</text>

    <!-- Setpoint -->
    <text x="850" y="245" font-family="Arial" font-size="12" fill="#4a9eff">Plant Setpoint:</text>
    <text x="1100" y="245" font-family="Arial" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="end" id="plant-setpoint">180°F</text>

    <!-- Load Distribution -->
    <text x="850" y="270" font-family="Arial" font-size="12" fill="#4a9eff">Load Distribution:</text>
    <text x="1100" y="270" font-family="Arial" font-size="14" font-weight="bold" fill="#ffffff" text-anchor="end" id="load-dist">BALANCED</text>

    <!-- Plant Load -->
    <text x="850" y="295" font-family="Arial" font-size="12" fill="#4a9eff">Plant Load:</text>
    <text x="1100" y="295" font-family="Arial" font-size="16" font-weight="bold" fill="#00ff00" text-anchor="end" id="plant-load">78%</text>

    <!-- Efficiency -->
    <text x="850" y="320" font-family="Arial" font-size="12" fill="#4a9eff">Plant Efficiency:</text>
    <text x="1100" y="320" font-family="Arial" font-size="16" font-weight="bold" fill="#00ff00" text-anchor="end" id="plant-eff">85.5%</text>

    <!-- Total Gas -->
    <text x="850" y="345" font-family="Arial" font-size="12" fill="#ffaa00">Total Gas Flow:</text>
    <text x="1100" y="345" font-family="Arial" font-size="14" font-weight="bold" fill="#ffaa00" text-anchor="end" id="total-gas">95 CFH</text>

    <!-- Status -->
    <text x="850" y="370" font-family="Arial" font-size="12" fill="#4a9eff">Plant Status:</text>
    <text x="1100" y="370" font-family="Arial" font-size="14" font-weight="bold" fill="#00ff00" text-anchor="end" id="plant-status">NORMAL</text>
  </g>

  <!-- Sequence Control -->
  <g id="sequence-control">
    <rect x="820" y="400" width="340" height="210" fill="#0d1b2a" stroke="#ff6b35" stroke-width="2" rx="5"/>
    <text x="990" y="430" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">SEQUENCE CONTROL</text>

    <!-- Rotation Schedule -->
    <text x="840" y="455" font-family="Arial" font-size="12" fill="#4a9eff">Rotation Schedule:</text>
    <text x="1100" y="455" font-family="Arial" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="end" id="rotation">ENABLED</text>

    <!-- Next Rotation -->
    <text x="840" y="478" font-family="Arial" font-size="12" fill="#4a9eff">Next Rotation:</text>
    <text x="1100" y="478" font-family="Arial" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="end" id="next-rotation">14:30</text>

    <!-- Stage 1 Enable -->
    <text x="840" y="503" font-family="Arial" font-size="12" fill="#00ff00">Stage 1 Enable:</text>
    <text x="1100" y="503" font-family="Arial" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="end" id="stage1">B1: 180°F</text>

    <!-- Stage 2 Enable -->
    <text x="840" y="528" font-family="Arial" font-size="12" fill="#00ff00">Stage 2 Enable:</text>
    <text x="1100" y="528" font-family="Arial" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="end" id="stage2">B2: 175°F</text>

    <!-- Stage 3 Enable -->
    <text x="840" y="553" font-family="Arial" font-size="12" fill="#666666">Stage 3 Enable:</text>
    <text x="1100" y="553" font-family="Arial" font-size="13" font-weight="bold" fill="#666666" text-anchor="end" id="stage3">B3: 170°F</text>

    <!-- Outside Air Reset -->
    <text x="840" y="578" font-family="Arial" font-size="12" fill="#4a9eff">OA Reset:</text>
    <text x="1100" y="578" font-family="Arial" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="end" id="oa-reset">ACTIVE</text>

    <!-- Current OAT -->
    <text x="840" y="598" font-family="Arial" font-size="12" fill="#4a9eff">Outside Air:</text>
    <text x="1100" y="598" font-family="Arial" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="end" id="oat">45°F</text>
  </g>

  <!-- Plant Totals -->
  <g id="plant-totals">
    <rect x="100" y="650" width="1060" height="120" fill="#0d1b2a" stroke="#00ff00" stroke-width="2" rx="5"/>
    <text x="630" y="680" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" text-anchor="middle">PLANT SUMMARY</text>

    <!-- Total Capacity -->
    <text x="130" y="710" font-family="Arial" font-size="12" fill="#4a9eff">Total Capacity:</text>
    <text x="130" y="735" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" id="total-capacity">15.0 MMBtu/h</text>

    <!-- Current Output -->
    <text x="330" y="710" font-family="Arial" font-size="12" fill="#ff6b35">Current Output:</text>
    <text x="330" y="735" font-family="Arial" font-size="18" font-weight="bold" fill="#ff6b35" id="current-output">7.8 MMBtu/h</text>

    <!-- Plant Efficiency -->
    <text x="530" y="710" font-family="Arial" font-size="12" fill="#00ff00">Efficiency:</text>
    <text x="530" y="735" font-family="Arial" font-size="18" font-weight="bold" fill="#00ff00" id="summary-eff">85.5%</text>

    <!-- Total Run Hours -->
    <text x="700" y="710" font-family="Arial" font-size="12" fill="#4a9eff">Total Run Hours:</text>
    <text x="700" y="735" font-family="Arial" font-size="18" font-weight="bold" fill="#ffffff" id="total-hours">45,782</text>

    <!-- Energy Consumed -->
    <text x="920" y="710" font-family="Arial" font-size="12" fill="#ffaa00">Today's Gas:</text>
    <text x="920" y="735" font-family="Arial" font-size="18" font-weight="bold" fill="#ffaa00" id="gas-consumed">1,250 Therms</text>
  </g>

  <script><![CDATA[
function init() {
  update();
}

// FUXA Integration Variables
let boilerPlant = {
      // Boiler 1
      b1_status: true,
      b1_pressure: 45,
      b1_temp: 180,
      b1_fire: 85,
      b1_output: 4.2,
      b1_eff: 86,

      // Boiler 2
      b2_status: true,
      b2_pressure: 45,
      b2_temp: 180,
      b2_fire: 72,
      b2_output: 3.6,
      b2_eff: 85,

      // Boiler 3
      b3_status: false,
      b3_pressure: 0,
      b3_temp: 0,
      b3_fire: 0,
      b3_output: 0,
      b3_eff: 0,

      // Pumps
      p1_status: true,
      p1_speed: 90,
      p2_status: true,
      p2_speed: 88,
      p3_status: false,
      p3_speed: 0,

      // Headers
      hws_temp: 180,
      hwr_temp: 160,
      header_pressure: 45,
      hw_flow: 850,
      delta_t: 20,

      // Plant Control
      control_mode: "LEAD/LAG",
      active_boilers: "2 of 3",
      plant_setpoint: 180,
      load_dist: "BALANCED",
      plant_load: 78,
      plant_eff: 85.5,
      total_gas: 95,
      plant_status: "NORMAL",

      // Sequence
      rotation: "ENABLED",
      next_rotation: "14:30",
      stage1: "B1: 180°F",
      stage2: "B2: 175°F",
      stage3: "B3: 170°F",
      oa_reset: "ACTIVE",
      oat: 45,

      // Totals
      total_capacity: 15.0,
      total_output: 7.8,
      current_output: 7.8,
      total_hours: 45782,
      gas_consumed: 1250
    };

    function updateDisplay() {
      // Update Boiler 1
      document.getElementById('b1-status').setAttribute('fill', boilerPlant.b1_status ? '#00ff00' : '#ff0000');
      document.getElementById('b1-pressure').textContent = boilerPlant.b1_pressure;
      document.getElementById('b1-temp').textContent = boilerPlant.b1_temp + '°F';
      document.getElementById('b1-fire').textContent = 'Fire: ' + boilerPlant.b1_fire + '%';
      document.getElementById('b1-output').textContent = boilerPlant.b1_output.toFixed(1) + ' MMBtu/h';
      document.getElementById('b1-eff').textContent = 'Eff: ' + boilerPlant.b1_eff + '%';

      // Update Boiler 2
      document.getElementById('b2-status').setAttribute('fill', boilerPlant.b2_status ? '#00ff00' : '#ff0000');
      document.getElementById('b2-pressure').textContent = boilerPlant.b2_pressure;
      document.getElementById('b2-temp').textContent = boilerPlant.b2_temp + '°F';
      document.getElementById('b2-fire').textContent = 'Fire: ' + boilerPlant.b2_fire + '%';
      document.getElementById('b2-output').textContent = boilerPlant.b2_output.toFixed(1) + ' MMBtu/h';
      document.getElementById('b2-eff').textContent = 'Eff: ' + boilerPlant.b2_eff + '%';

      // Update Boiler 3
      document.getElementById('b3-status').setAttribute('fill', boilerPlant.b3_status ? '#00ff00' : '#666666');
      document.getElementById('b3-pressure').textContent = boilerPlant.b3_status ? boilerPlant.b3_pressure : '0';
      document.getElementById('b3-temp').textContent = boilerPlant.b3_status ? boilerPlant.b3_temp + '°F' : 'OFF';
      document.getElementById('b3-fire').textContent = 'Fire: ' + boilerPlant.b3_fire + '%';
      document.getElementById('b3-output').textContent = boilerPlant.b3_status ? boilerPlant.b3_output.toFixed(1) + ' MMBtu/h' : 'STANDBY';
      document.getElementById('b3-eff').textContent = boilerPlant.b3_status ? 'Eff: ' + boilerPlant.b3_eff + '%' : '---';

      // Update Pumps
      document.getElementById('p1-status').setAttribute('fill', boilerPlant.p1_status ? '#00ff00' : '#ff0000');
      document.getElementById('p1-speed').textContent = boilerPlant.p1_status ? boilerPlant.p1_speed + '%' : 'OFF';

      document.getElementById('p2-status').setAttribute('fill', boilerPlant.p2_status ? '#00ff00' : '#ff0000');
      document.getElementById('p2-speed').textContent = boilerPlant.p2_status ? boilerPlant.p2_speed + '%' : 'OFF';

      document.getElementById('p3-status').setAttribute('fill', boilerPlant.p3_status ? '#00ff00' : '#666666');
      document.getElementById('p3-speed').textContent = boilerPlant.p3_status ? boilerPlant.p3_speed + '%' : 'OFF';

      // Update Headers
      document.getElementById('hws-temp').textContent = boilerPlant.hws_temp + '°F';
      document.getElementById('hwr-temp').textContent = boilerPlant.hwr_temp + '°F';
      document.getElementById('header-pressure').textContent = boilerPlant.header_pressure + ' PSI';
      document.getElementById('hw-flow').textContent = boilerPlant.hw_flow + ' GPM';
      document.getElementById('delta-t').textContent = boilerPlant.delta_t + '°F';
      document.getElementById('total-output').textContent = boilerPlant.total_output.toFixed(1) + ' MMBtu/h';

      // Update Control Panel
      document.getElementById('control-mode').textContent = boilerPlant.control_mode;
      document.getElementById('active-boilers').textContent = boilerPlant.active_boilers;
      document.getElementById('plant-setpoint').textContent = boilerPlant.plant_setpoint + '°F';
      document.getElementById('load-dist').textContent = boilerPlant.load_dist;
      document.getElementById('plant-load').textContent = boilerPlant.plant_load + '%';
      document.getElementById('plant-eff').textContent = boilerPlant.plant_eff.toFixed(1) + '%';
      document.getElementById('total-gas').textContent = boilerPlant.total_gas + ' CFH';
      document.getElementById('plant-status').textContent = boilerPlant.plant_status;

      // Update Sequence
      document.getElementById('rotation').textContent = boilerPlant.rotation;
      document.getElementById('next-rotation').textContent = boilerPlant.next_rotation;
      document.getElementById('stage1').textContent = boilerPlant.stage1;
      document.getElementById('stage2').textContent = boilerPlant.stage2;
      document.getElementById('stage3').textContent = boilerPlant.stage3;
      document.getElementById('oa-reset').textContent = boilerPlant.oa_reset;
      document.getElementById('oat').textContent = boilerPlant.oat + '°F';

      // Update Totals
      document.getElementById('total-capacity').textContent = boilerPlant.total_capacity.toFixed(1) + ' MMBtu/h';
      document.getElementById('current-output').textContent = boilerPlant.current_output.toFixed(1) + ' MMBtu/h';
      document.getElementById('summary-eff').textContent = boilerPlant.plant_eff.toFixed(1) + '%';
      document.getElementById('total-hours').textContent = boilerPlant.total_hours.toLocaleString();
      document.getElementById('gas-consumed').textContent = boilerPlant.gas_consumed.toLocaleString() + ' Therms';

      // Calculate totals
      boilerPlant.total_output = boilerPlant.b1_output + boilerPlant.b2_output + boilerPlant.b3_output;
      boilerPlant.current_output = boilerPlant.total_output;
      boilerPlant.delta_t = boilerPlant.hws_temp - boilerPlant.hwr_temp;
    }

    // Initialize display
    updateDisplay();

    // Update every second
    setInterval(updateDisplay, 1000);

init();
]]></script>
</svg>
